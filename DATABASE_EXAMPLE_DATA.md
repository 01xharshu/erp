# MongoDB Student Documents - Example

## What Will Be Stored in MongoDB

After running `npm run seed`, your MongoDB `college_erp.students` collection will contain these 3 documents:

### Document 1: Harshul Sharma

```json
{
  "_id": ObjectId("..."),
  "enrollmentNo": "EN2024001",
  "email": "student1@college.edu",
  "firstName": "Harshul",
  "lastName": "Sharma",
  "password": "$2b$10$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZabcd",
  "phone": "+91-9876543210",
  "department": "Computer Science",
  "semester": 4,
  "cgpa": 8.5,
  "createdAt": "2024-02-21T10:30:45.123Z",
  "updatedAt": "2024-02-21T10:30:45.123Z"
}
```

**Test with:**
```
Enrollment: EN2024001
Password: password123
```

---

### Document 2: Priya Singh

```json
{
  "_id": ObjectId("..."),
  "enrollmentNo": "EN2024002",
  "email": "student2@college.edu",
  "firstName": "Priya",
  "lastName": "Singh",
  "password": "$2b$10$zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA1234",
  "phone": "+91-9876543211",
  "department": "Electronics",
  "semester": 3,
  "cgpa": 8.2,
  "createdAt": "2024-02-21T10:30:45.456Z",
  "updatedAt": "2024-02-21T10:30:45.456Z"
}
```

**Test with:**
```
Enrollment: EN2024002
Password: password123
```

---

### Document 3: Rajesh Kumar

```json
{
  "_id": ObjectId("..."),
  "enrollmentNo": "EN2024003",
  "email": "student3@college.edu",
  "firstName": "Rajesh",
  "lastName": "Kumar",
  "password": "$2b$10$1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTU",
  "phone": "+91-9876543212",
  "department": "Mechanical",
  "semester": 2,
  "cgpa": 7.8,
  "createdAt": "2024-02-21T10:30:45.789Z",
  "updatedAt": "2024-02-21T10:30:45.789Z"
}
```

**Test with:**
```
Enrollment: EN2024003
Password: password123
```

---

## Important Notes

### Password Field

⚠️ **All password fields show hashed values like:**
```
$2b$10$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ...
```

✅ These are **NOT the plaintext passwords**
✅ These **CANNOT be reversed** to get original password
✅ On login, your password is hashed again and compared with this hash

### Login Process

1. User enters: `password123`
2. System hashes it: `bcrypt.hash("password123")`
3. Compares with stored hash: `bcrypt.compare(hash, stored_hash)`
4. Result: `true` or `false` (never reveals original password)

### Viewing in MongoDB Atlas

If you log into MongoDB Atlas and view these documents:

1. Go to: Your Cluster → Collections
2. Select: `college_erp` database
3. Select: `students` collection
4. You'll see all 3 documents with their hashed passwords
5. The documents look exactly like what's shown above

### Field Descriptions

| Field | Type | Example | Notes |
|-------|------|---------|-------|
| `_id` | ObjectId | ObjectId("...") | Auto-generated by MongoDB |
| `enrollmentNo` | String | "EN2024001" | Student's unique enrollment number |
| `email` | String | "student1@college.edu" | Email address |
| `firstName` | String | "Harshul" | First name |
| `lastName` | String | "Sharma" | Last name |
| `password` | String | "$2b$10$..." | Bcrypt hashed password (not plaintext!) |
| `phone` | String | "+91-9876543210" | Phone number |
| `department` | String | "Computer Science" | Department name |
| `semester` | Number | 4 | Current semester (1-8) |
| `cgpa` | Number | 8.5 | Cumulative GPA (0-10) |
| `createdAt` | Date | ISO 8601 timestamp | When record was created |
| `updatedAt` | Date | ISO 8601 timestamp | When record was last updated |

---

## Testing Each Account

You can test each student account one by one:

### Test Account 1
```
URL: http://localhost:3000/login
Enrollment: EN2024001
Password: password123
Expected: Login successful, redirected to dashboard
Student Name: Harshul Sharma
Department: Computer Science
```

### Test Account 2
```
URL: http://localhost:3000/login
Enrollment: EN2024002
Password: password123
Expected: Login successful, redirected to dashboard
Student Name: Priya Singh
Department: Electronics
```

### Test Account 3
```
URL: http://localhost:3000/login
Enrollment: EN2024003
Password: password123
Expected: Login successful, redirected to dashboard
Student Name: Rajesh Kumar
Department: Mechanical
```

---

## What Happens When You Login

### Successful Login (EN2024001 / password123)

**Browser Console** (after login):
```javascript
localStorage.getItem('authToken')
// Output: "base64encodedtoken"

localStorage.getItem('studentData')
// Output: {
//   "enrollmentNo": "EN2024001",
//   "firstName": "Harshul",
//   "lastName": "Sharma",
//   "email": "student1@college.edu",
//   "department": "Computer Science",
//   "semester": 4,
//   "cgpa": 8.5
// }
```

**URL**: Redirects from `/login` to `/dashboard`

**Toast Message**: "Login successful!"

---

### Failed Login (EN2024001 / wrongpassword)

**Toast Message**: "Invalid credentials"

**URL**: Stays on `/login`

**localStorage**: Nothing stored

---

### Invalid Enrollment (EN9999999 / password123)

**Toast Message**: "Invalid credentials" (same as wrong password - intentional!)

**URL**: Stays on `/login`

**localStorage**: Nothing stored

---

## Database Query Process

When you login with `EN2024001 / password123`:

```
┌─────────────────────────────────────────────┐
│ Step 1: Database Query                      │
│ Find student with enrollmentNo = "EN2024001"│
└─────────────────────┬───────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────┐
│ Step 2: Student Found                       │
│ Returns entire document including:          │
│ - enrollmentNo: "EN2024001"                 │
│ - password: "$2b$10$...hashed..."           │
│ - firstName: "Harshul"                      │
│ - ... other fields ...                      │
└─────────────────────┬───────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────┐
│ Step 3: Password Verification               │
│ Compare:                                    │
│ - Input: "password123" (what user typed)   │
│ - Stored: "$2b$10$...hashed..."            │
│ bcrypt.compare(input, stored)              │
└─────────────────────┬───────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────┐
│ Step 4: Match Result                        │
│ If match: Return { success: true, token }  │
│ If no match: Return { success: false }     │
└─────────────────────────────────────────────┘
```

---

## Adding More Students (Later)

To add a new student with hashed password:

```javascript
// Example: Adding a 4th student

const newStudent = {
  enrollmentNo: "EN2024004",
  email: "student4@college.edu",
  firstName: "Anjali",
  lastName: "Patel",
  password: "securePassword123",  // Will be auto-hashed
  phone: "+91-9876543213",
  department: "IT",
  semester: 1,
  cgpa: 0
};

// The createStudent function automatically hashes the password
await createStudent(db, newStudent);

// In database it's stored as:
// password: "$2b$10$...different_hash..."
```

---

## Querying Your MongoDB Data

If you want to see what's actually stored:

**MongoDB Atlas UI:**
1. Collections → college_erp → students
2. Click any document to view it
3. Passwords appear as `$2b$10$...` hashes

**Via Code (for debugging):**
```typescript
import { getDatabase } from "@/lib/mongodb";

const db = await getDatabase();
const students = await db.collection("students")
  .find({})
  .toArray();

console.log(students);
// Shows all 3 students with hashed passwords
```

**Via MongoDB Shell:**
```bash
use college_erp
db.students.find().pretty()
```

---

## Final Verification

After `npm run seed`, verify you can see these exact students in MongoDB:

| Enrollment | Email | Name | CGPA |
|-----------|-------|------|------|
| EN2024001 | student1@college.edu | Harshul Sharma | 8.5 |
| EN2024002 | student2@college.edu | Priya Singh | 8.2 |
| EN2024003 | student3@college.edu | Rajesh Kumar | 7.8 |

All have:
- Hashed passwords in `$2b$10$...` format
- CreatedAt and UpdatedAt timestamps
- Complete student profile data

You can now use any of these three accounts to test your entire application!
